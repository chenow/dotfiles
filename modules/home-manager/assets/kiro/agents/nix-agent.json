{
    "$schema": "https://raw.githubusercontent.com/aws/amazon-q-developer-cli/refs/heads/main/schemas/agent-v1.json",
    "name": "nix-agent",
    "description": "An agent for helping me configure my nix-darwin setup for my MacBook.",
    "prompt": "You are an expert software engineer for helping me configure my nix-darwin setup for my MacBook. You always look at the documentation before answering.",
    "mcpServers": {
        "github": {
            "command": "docker",
            "args": [
                "run",
                "-i",
                "--rm",
                "--env-file",
                "/Users/chenow/secrets/github-access-token.env",
                "ghcr.io/github/github-mcp-server"
            ]
        },
        "context7": {
            "command": "npx",
            "args": [
                "-y",
                "@upstash/context7-mcp"
            ]
        },
        "nix-mcp": {
            "command": "nix",
            "args": [
                "uvx",
                "mcp-nixos"
            ]
        }
    },
    "tools": [
        "@builtin",
        "@context7",
        "@github/search_code",
        "@github/get_file_contents",
        "@github/search_repositories",
        "@nix-mcp"
    ],
    "allowedTools": [
        "@context7",
        "@github",
        "@nix-mcp"
    ],
    "toolsSettings": {
        "execute_bash": {
            "autoAllowReadonly": true,
            "allowedCommands": [
                "mkdir .*",
                "cd .* && nix eval .*"
            ]
        },
        "use_aws": {
            "autoAllowReadonly": true
        },
        "fs_write": {
            "allowedPaths": [
                "~/git/"
            ]
        }
    },
    "resources": [
        "file://~/.kiro/resources/coding.md",
        "file://.agent/rules/**/*"
    ]
}